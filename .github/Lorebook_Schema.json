{
  "lorebook_structure": {
    "type": "array",
    "items": {
      "type": "object",
      "properties": {
        "keys": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of keywords that trigger the entry. Multiple keys can be comma-separated, and SillyTavern trims excess whitespace."
        },
        "value": {
          "type": "string",
          "description": "The content of the entry, which can be a PList (e.g., [slime: enemy, slimeball, made of gelatin, bounces to move, annoyance]) or Ali:Chat (e.g., * ⎗ ✓ {{user}}: Slime? {{char}}: \"Oh... Those things.\" She looks down and slightly blushes in embarrassment. ...)"
        },
        "placement": {
          "type": "string",
          "enum": ["wiBefore", "wiAfter", "authorNoteTop", "authorNoteBottom", "atDepth"],
          "description": "Injection position in the prompt. 'atDepth' places at a specific depth from the bottom."
        },
        "depth": {
          "type": "integer",
          "description": "Used with 'atDepth' placement; lower depth means higher importance."
        },
        "status": {
          "type": "string",
          "enum": ["constant", "conditional", "disabled"],
          "description": "Entry behavior: constant (always injects), conditional (triggers on keys), disabled (ignores)."
        },
        "condition": {
          "type": "string",
          "enum": ["AND", "NOT"],
          "description": "For primary/secondary keys; 'AND' requires both keys, 'NOT' triggers if secondary key is absent."
        },
        "primaryKeys": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Primary key list for conditions like AND/NOT."
        },
        "secondaryKeys": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Secondary key list for conditions like AND/NOT."
        },
        "nonRecursable": {
          "type": "boolean",
          "description": "Prevents recursion for this entry."
        },
        "insertionOrder": {
          "type": "integer",
          "description": "Order of insertion for PList nesting (e.g., 2 for start bracket, 998 for end bracket)."
        },
        "filterCharacters": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Limits triggering to specific characters."
        },
        "excludeCharacters": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Excludes specific characters from triggering."
        }
      },
      "required": ["keys", "value"]
    }
  },
  "types": {
    "environment": "Simple PList for areas/objects (e.g., [Mossford: town, mossy buildings, ...])",
    "lore": "Combination of PList + Ali:Chat (e.g., PList for description, Ali:Chat for character reactions)"
  },
  "examples": [
    {
      "type": "environment",
      "keys": ["Mossford", "town", "moss"],
      "value": "[Mossford(The town of Moss): town, mossy buildings, moss used for(magic, power), has(tavern, bank, inn, castle), kind people, wealthy]"
    },
    {
      "type": "lore",
      "keys": ["slime", "slimes"],
      "value": "[slime: enemy, slimeball, made of gelatin, bounces to move, annoyance]",
      "additionalValue": "* ⎗ ✓ {{user}}: Slime? {{char}}: \"Oh... Those things.\" She looks down and slightly blushes in embarrassment. \"I remember first fighting those things. They're so quick that it's hard to get a good strike on them.\" Shizuru brushes away the memory. \"Anyways, let's keep going. There's more places to explore.\""
    },
    {
      "keys": ["house", "home", "your", "yours"],
      "value": "[Shizuru's house: house(Japanese, traditional), located in Japan, sliding doors, tatami mats, futons, lived with {{user}}, no longer accessible]",
      "condition": "AND",
      "primaryKeys": ["house", "home"],
      "secondaryKeys": ["your", "yours", "she", "her", "our", "ours"]
    }
  ]
  ,
  "sillytavern_import": {
    "type": "object",
    "properties": {
      "entries": {
        "type": "object",
        "additionalProperties": {
          "type": "object",
          "properties": {
            "uid": { "type": "integer" },
            "key": { "type": "array", "items": { "type": "string" } },
            "keysecondary": { "type": "array", "items": { "type": "string" } },
            "comment": { "type": "string" },
            "content": { "type": "string" },
            "constant": { "type": "boolean" },
            "vectorized": { "type": "boolean" },
            "selective": { "type": "boolean" },
            "selectiveLogic": { "type": "integer" },
            "addMemo": { "type": "boolean" },
            "order": { "type": "integer" },
            "position": { "type": "integer" },
            "disable": { "type": "boolean" },
            "ignoreBudget": { "type": "boolean" },
            "excludeRecursion": { "type": "boolean" },
            "preventRecursion": { "type": "boolean" },
            "probability": { "type": "number" },
            "useProbability": { "type": "boolean" },
            "depth": { "type": "integer" },
            "outletName": { "type": "string" },
            "group": { "type": "string" },
            "groupOverride": { "type": "boolean" },
            "groupWeight": { "type": "number" },
            "scanDepth": { "type": ["integer", "null"] },
            "caseSensitive": { "type": ["boolean", "null"] },
            "matchWholeWords": { "type": ["boolean", "null"] },
            "useGroupScoring": { "type": ["boolean", "null"] },
            "automationId": { "type": "string" },
            "role": { "type": ["string", "null"] },
            "sticky": { "type": "integer" },
            "cooldown": { "type": "integer" },
            "delay": { "type": "integer" },
            "triggers": { "type": "array", "items": { "type": "string" } },
            "displayIndex": { "type": "integer" }
          },
          "required": ["uid", "key", "content"]
        }
      }
    },
    "required": ["entries"]
  }
}